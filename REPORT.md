# Чекпоинт 4 - создание сервиса

## Запуск сервисов
Из корневой папки проектка необходимо выполнить в терминале команду
`docker-compose up --build`, после чего fast-api - сервер развернется по адресу `http://localhost:8000/`,
а streamlit - по адресу `http://localhost:8501/`.
Документация для fast-api - сервера расположена по адресу `http://localhost:8000/api/openapi`

## Описание Fast-Api части
В fast-api части реализованы следующие ручки:
* fit (POST) - запрос на обучение новой модели:\
    Формат запроса:
    ```
    model_id - id новой модели которая будет обучаться
    model_type - тип модели (log_reg или naive_bayes)
    X - датасет для обучения
    y - переменная-тагрет
    hyperparams - гиперпараметры для модели в виде словаря
    ```
    Формат ответа:\
    Возвращает по кривым обучения для модели:
    - auc-curve
    - pr-curve

В случае, если model_id не выставлено, будет обучена уже существующая модель
выставленная с помощью ручки `set_model`.

* predict (POST) - предсказание моделью\
    Формат запроса:
    ```
    X - датасет для предсказания
    ```
* set_model (POST) - выбор модели для дальнейшей работы с ней (предсказания этой моделью)
  Формат запроса:
  ```
  model_id - id модели, которую надо выставить
  ```
* list_models (GET) - выводит список моделей с их гиперпараметрами

  ## Описание streamlit
  Скринкаст сервиса находится в репозитории - https://github.com/yanaverina/AI-YP-24-16-9.-A-level-/blob/mvp/%D0%A1%D1%82%D1%80%D0%B8%D0%BC%D0%BA%D0%B0%D1%81%D1%82_%D1%81%D0%B5%D1%80%D0%B2%D0%B8%D1%81_%D0%BA%D0%BB%D0%B0%D1%81%D1%81%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D0%B8_%D0%B2%D0%BE%D0%BF%D1%80%D0%BE%D1%81_%D1%8D%D0%BA%D0%B7%D0%B0%D0%BC%D0%B5%D0%BD%D0%B0_A_level.mkv
  
  В streamlit реализовано несколько вкладок для работы с сервисом fastapi:
  ![Screenshot from 2025-01-03 22-23-45](https://github.com/user-attachments/assets/ff60161e-7f3a-4eed-970b-9d5dc7a1cfbf)

  * EDA
  Представлены интерактивные графики распределения вопрос по тематикам в исходных данных, а так облака слов.
  ![Screenshot from 2025-01-03 22-25-58](https://github.com/user-attachments/assets/30aff2c0-d609-42fd-80d4-936cd76a1ab9)

  Облака слов можно строить по любой из тематик вопросов экзамена.
  ![Screenshot from 2025-01-03 22-26-59](https://github.com/user-attachments/assets/6e75de5b-ddae-47fe-a078-9b5e9ca6717c)

  * Обучить модель
    Представлена возможность обучить модель линейной регрессии с любыми параметрами из предложенных в выпадающих списках.
    ![Screenshot from 2025-01-03 22-43-00](https://github.com/user-attachments/assets/3027e806-ac07-4ecc-82e4-4d16cec80a80)



    Интерактивные графики кривых обучения - ROC AUC и Precision-Recall строятся автоматически в зависимости от выбранных параметров моделей.
    ![Screenshot from 2025-01-03 22-40-02](https://github.com/user-attachments/assets/9a63a20d-db3a-4502-bd23-331aa22ae1bf)


  * Предсказание на test
    Пользователь может загрузить свои данные в csv формате и получить предсказанные тематики к своим вопросам. Модель также выбирается пользователем самостоятельно из предложенных.
    ![Screenshot from 2025-01-03 22-40-49](https://github.com/user-attachments/assets/a597bb6a-14fe-4426-9a4a-8586657d4f23)


  * Список моделей
    Представлены существующие модели на сервисе.
    ![Screenshot from 2025-01-03 22-41-18](https://github.com/user-attachments/assets/29c35ecb-df58-4892-aed1-da38b83967c6)







